# Тема 1.1. Работа с интерфейсом командной строки

## Объем
2 часа

## Введение

Интерфейс командной строки (CLI) — это основной инструмент системного администратора в ОС «Альт». В отличие от графического интерфейса (GUI), командная строка предоставляет прямой доступ к системе, позволяет автоматизировать задачи и эффективно управлять ресурсами. Владение CLI особенно важно при работе с серверами, где GUI может отсутствовать или быть нежелательным.

В этой лекции мы изучим основы работы с командной строкой в ОС «Альт», включая оболочку Bash, структуру файловой системы по стандарту FHS, навигацию по каталогам, работу с файлами и каталогами, текстовые редакторы, а также стандартные потоки и pipeline. Эти навыки являются фундаментальными для успешного администрирования Linux-систем.

**Цели лекции:**
- Освоить основы работы с интерфейсом командной строки
- Научиться использовать оболочку Bash эффективно
- Понимать структуру файловой системы по стандарту FHS
- Владеть навыками навигации по каталогам и управления файлами
- Уметь работать с текстовыми редакторами
- Понимать принципы работы со стандартными потоками и pipeline

**Задачи лекции:**
1. Изучить различия между текстовым и графическим интерфейсом
2. Освоить основные команды оболочки Bash
3. Понять структуру каталогов по стандарту FHS
4. Научиться работать с файлами и каталогами
5. Освоить создание и использование ссылок
6. Изучить текстовые редакторы nano, vim и emacs
7. Понять принципы работы со стандартными потоками
8. Научиться использовать pipeline для объединения команд

К концу лекции вы сможете уверенно работать в командной строке, что является необходимым навыком для дальнейшего изучения администрирования ОС «Альт».

## Текстовый интерфейс пользователя

Текстовый интерфейс пользователя (TUI) — это способ взаимодействия с операционной системой через командную строку, в отличие от графического интерфейса (GUI). В Linux TUI предоставляет прямой доступ к ядру и инструментам, позволяя автоматизировать задачи и работать на серверах без графики.

**Преимущества текстового интерфейса:**
- Экономия ресурсов системы
- Возможность удаленной работы
- Автоматизация через скрипты
- Более точный контроль над системой
- Работа на слабых компьютерах

**Ключевые элементы TUI:**
- **Командная строка**: Строка, куда вводятся команды
- **Приглашение**: Символы, указывающие готовность к вводу (например, `user@host:~$`)
- **Виртуальные консоли**: Терминалы, доступные по Ctrl+Alt+F1-F6, для многозадачности
- **Горячие клавиши**: Комбинации клавиш для быстрого доступа к функциям

**Таблица: Сравнение текстового и графического интерфейса**
| Характеристика | Текстовый интерфейс (CLI) | Графический интерфейс (GUI) |
|---------------|---------------------------|----------------------------|
| Ресурсы системы | Минимальные | Значительные |
| Скорость работы | Высокая | Ниже |
| Автоматизация | Легко | Сложно |
| Удаленная работа | Отлично | Ограничено |
| Обучение | Сложнее | Проще |
| Гибкость | Очень высокая | Ограничена |

**Виртуальные консоли:**
- Доступны через Ctrl+Alt+F1-F6
- Позволяют переключаться между сессиями
- Полезны для многозадачности
- Можно работать без графической оболочки

**Горячие клавиши в Bash:**
- Ctrl+A: Начало строки
- Ctrl+E: Конец строки
- Ctrl+L: Очистка экрана
- Ctrl+C: Прервать выполнение команды
- Ctrl+D: Конец ввода (выход из сессии)
- Ctrl+Z: Приостановить выполнение
- Tab: Автодополнение команд и путей

Текстовый интерфейс особенно эффективен для скриптинга и удаленного управления, что делает его незаменимым инструментом для системного администратора.

## Оболочка Bash

Bash (Bourne Again SHell) — стандартная командная оболочка в Linux, основанная на sh. Она интерпретирует команды, поддерживает скриптинг и имеет множество встроенных функций для удобства работы.

**Приглашение командной строки:**
```
[username@hostname current_directory]$
```
- username: Имя текущего пользователя
- hostname: Имя компьютера
- current_directory: Текущий каталог ( ~ означает домашний каталог)
- $: Символ приглашения (для root #)

**Основные функции Bash:**
- История команд
- Автодополнение (Tab)
- Переменные окружения
- Перенаправление потоков
- Pipeline
- Подстановка

**Таблица: Горячие клавиши в Bash**
| Комбинация | Действие |
|------------|----------|
| Ctrl+A | Переместиться в начало строки |
| Ctrl+E | Переместиться в конец строки |
| Ctrl+L | Очистить экран |
| Ctrl+C | Прервать выполнение команды |
| Ctrl+D | Завершить ввод (EOF) |
| Ctrl+Z | Приостановить процесс |
| Ctrl+R | Поиск в истории команд |
| Ctrl+U | Удалить строку до курсора |
| Ctrl+K | Удалить строку после курсора |
| Ctrl+W | Удалить слово до курсора |
| Alt+B | Переместиться на слово назад |
| Alt+F | Переместиться на слово вперед |

**История команд:**
- `history` — показать историю команд
- Стрелка вверх/вниз — навигация по истории
- `!n` — выполнить команду номер n из истории
- `!!` — выполнить последнюю команду
- `!string` — выполнить последнюю команду, начинающуюся с string

**Переменные окружения:**
- `echo $PATH` — показать переменную PATH
- `export VARIABLE=value` — установить переменную
- `env` — показать все переменные окружения
- `set` — показать все переменные и функции

**Алиасы:**
- `alias ll='ls -la'` — создать алиас
- `unalias ll` — удалить алиас
- `alias` — показать все алиасы

Bash поддерживает переменные, циклы и условные операторы для автоматизации, что делает его мощным инструментом для системного администратора.

## Стандарт FHS: структура каталогов

Filesystem Hierarchy Standard (FHS) — стандарт структуры каталогов в Unix-подобных системах, включая ОС «Альт». Он определяет назначение каждого каталога и обеспечивает совместимость между различными дистрибутивами Linux.

**Таблица: Основные каталоги по стандарту FHS**
| Каталог | Назначение | Примеры содержимого |
|---------|------------|-------------------|
| `/` | Корень файловой системы | Все остальные каталоги |
| `/bin` | Основные исполняемые файлы | ls, cp, mv, bash |
| `/boot` | Файлы загрузки | Ядро, загрузчик GRUB |
| `/dev` | Устройства | /dev/sda, /dev/tty1 |
| `/etc` | Конфигурационные файлы | /etc/passwd, /etc/fstab |
| `/home` | Домашние каталоги пользователей | /home/user1, /home/user2 |
| `/lib` | Системные библиотеки | Библиотеки для /bin и /sbin |
| `/media` | Точки монтирования съемных носителей | /media/usb, /media/cdrom |
| `/mnt` | Временные точки монтирования | /mnt/temp |
| `/opt` | Дополнительное ПО | Программы от сторонних производителей |
| `/proc` | Виртуальная файловая система | Информация о процессах |
| `/root` | Домашний каталог root | Файлы суперпользователя |
| `/sbin` | Системные исполняемые файлы | fdisk, ifconfig, reboot |
| `/srv` | Данные сервисов | /srv/www, /srv/ftp |
| `/sys` | Информация о системе | Виртуальная файловая система |
| `/tmp` | Временные файлы | Временные файлы всех пользователей |
| `/usr` | Пользовательские программы | /usr/bin, /usr/lib, /usr/share |
| `/var` | Переменные данные | Логи, кэш, почта |

**Дополнительные подкаталоги:**
- `/usr/bin` — пользовательские программы
- `/usr/lib` — библиотеки для /usr/bin
- `/usr/share` — архитектурно-независимые данные
- `/usr/local` — программы, установленные локально
- `/var/log` — системные логи
- `/var/cache` — кэш приложений
- `/var/spool` — очереди (почта, печать)

**Важность FHS:**
- Обеспечивает предсказуемость размещения файлов
- Упрощает администрирование
- Обеспечивает совместимость между системами
- Помогает в создании скриптов и документации

Понимание структуры FHS необходимо для эффективной работы с системой и поиска нужных файлов.

## Пути и директории

Пути — это адреса файлов и каталогов в файловой системе. Понимание путей необходимо для навигации и работы с файлами.

**Типы путей:**
- **Абсолютные пути**: Начинаются с корня `/` и указывают полный путь к файлу
- **Относительные пути**: Отсчитываются от текущего каталога

**Примеры абсолютных путей:**
```
/etc/passwd
/home/user1/documents/file.txt
/usr/local/bin/program
```

**Примеры относительных путей:**
```
./file.txt        # Файл в текущем каталоге
../file.txt       # Файл в родительском каталоге
documents/file.txt # Файл в подкаталоге documents
```

**Команды навигации:**
- `pwd` — показать текущий каталог
- `cd /path` — перейти в каталог
- `cd ..` — перейти в родительский каталог
- `cd ~` — перейти в домашний каталог
- `cd -` — перейти в предыдущий каталог

**Таблица: Команды для работы с каталогами**
| Команда | Описание | Пример |
|---------|----------|---------|
| `pwd` | Показать текущий каталог | `pwd` |
| `cd` | Перейти в каталог | `cd /home/user` |
| `ls` | Список файлов | `ls` |
| `ls -l` | Подробный список | `ls -l` |
| `ls -a` | Показать скрытые файлы | `ls -a` |
| `ls -la` | Подробный список с скрытыми | `ls -la` |
| `mkdir dirname` | Создать каталог | `mkdir newdir` |
| `rmdir dirname` | Удалить пустой каталог | `rmdir olddir` |
| `tree` | Дерево каталогов | `tree` |

**Специальные обозначения:**
- `.` — текущий каталог
- `..` — родительский каталог
- `~` — домашний каталог пользователя
- `-` — предыдущий каталог

**Примеры использования:**
```bash
# Перейти в каталог /etc
cd /etc

# Показать содержимое текущего каталога
ls

# Перейти в домашний каталог
cd ~

# Создать каталог в текущем каталоге
mkdir myfolder

# Перейти в созданный каталог
cd myfolder

# Вернуться в родительский каталог
cd ..
```

**Советы:**
- Используйте Tab для автодополнения путей
- Используйте `ls` для просмотра содержимого каталогов
- Будьте осторожны с абсолютными путями — они всегда начинаются с `/`

Правильное понимание путей и умение навигации по каталогам — основа эффективной работы в командной строке.

## Создание и копирование файлов

Создание и копирование файлов — базовые операции, которые системный администратор выполняет постоянно.

**Создание файлов:**

**Способ 1: Команда touch**
```bash
touch filename
```
Создает пустой файл или обновляет время последнего доступа.

**Примеры:**
```bash
touch newfile.txt
touch /home/user/document.txt
```

**Способ 2: Перенаправление вывода**
```bash
echo "текст" > filename
```
Создает файл с содержимым.

**Примеры:**
```bash
echo "Hello, World!" > greeting.txt
echo "Это мой первый файл" > notes.txt
```

**Способ 3: Использование текстовых редакторов**
```bash
nano filename
vim filename
```

**Копирование файлов:**

**Команда cp:**
```bash
cp source destination
```

**Таблица: Варианты использования cp**
| Команда | Описание | Пример |
|---------|----------|---------|
| `cp file1 file2` | Скопировать file1 в file2 | `cp document.txt backup.txt` |
| `cp /path/file1 /path/file2` | Скопировать с указанием путей | `cp /home/user/file.txt /tmp/` |
| `cp -r dir1 dir2` | Рекурсивно скопировать каталог | `cp -r documents backup_docs` |
| `cp -i file1 file2` | Интерактивный режим (спрашивать при перезаписи) | `cp -i important.txt copy.txt` |
| `cp -v file1 file2` | Вербальный режим (показывать процесс) | `cp -v largefile.txt /backup/` |

**Примеры копирования:**
```bash
# Скопировать файл в текущий каталог
cp /etc/passwd ./passwd_backup

# Скопировать файл с новым именем
cp original.txt copy.txt

# Рекурсивно скопировать каталог
cp -r /home/user/documents /home/user/backup

# Копировать несколько файлов в каталог
cp file1.txt file2.txt file3.txt /backup/

# Копировать с сохранением атрибутов
cp -p source.txt destination.txt
```

**Опции команды cp:**
- `-r` или `-R`: Рекурсивное копирование каталогов
- `-i`: Интерактивный режим (спрашивать перед перезаписью)
- `-v`: Вербальный режим (показывать процесс копирования)
- `-p`: Сохранять атрибуты файла (время, права)
- `-u`: Копировать только если исходный файл новее целевого

**Типичные ошибки:**
- ❌ Забыть про рекурсию при копировании каталогов
- ❌ Перепутать source и destination
- ❌ Не проверить права доступа
- ❌ Слишком длинные пути без кавычек

**✅ Правильный подход:**
- Всегда проверяйте права доступа
- Используйте `-i` для защиты от случайной перезаписи
- Используйте `-v` для контроля процесса
- Проверяйте результат командой `ls`

**Советы:**
- Используйте Tab для автодополнения имен файлов
- Проверяйте существование каталога назначения
- Для больших файлов используйте `rsync` вместо `cp`

Эти базовые операции являются фундаментом для более сложных манипуляций с файлами.

## Перемещение, переименование, удаление

Перемещение, переименование и удаление файлов и каталогов — важные операции, которые требуют осторожности.

**Перемещение и переименование:**

**Команда mv:**
```bash
mv source destination
```

**Таблица: Варианты использования mv**
| Команда | Описание | Пример |
|---------|----------|---------|
| `mv file1 file2` | Переименовать file1 в file2 | `mv oldname.txt newname.txt` |
| `mv file /path/` | Переместить файл в каталог | `mv document.txt /home/user/docs/` |
| `mv dir1 dir2` | Переместить или переименовать каталог | `mv oldfolder newfolder` |
| `mv -i file1 file2` | Интерактивный режим | `mv -i important.txt backup.txt` |
| `mv -v file1 file2` | Вербальный режим | `mv -v largefile.txt /archive/` |

**Примеры использования:**
```bash
# Переименовать файл
mv oldname.txt newname.txt

# Переместить файл в другой каталог
mv document.txt /home/user/documents/

# Переместить каталог
mv oldfolder /home/user/newlocation/

# Переименовать каталог
mv oldfolder newfoldername

# Переместить несколько файлов
mv file1.txt file2.txt file3.txt /destination/
```

**Удаление файлов:**

**Команда rm:**
```bash
rm filename
```

**Таблица: Варианты использования rm**
| Команда | Описание | Пример |
|---------|----------|---------|
| `rm file` | Удалить файл | `rm temp.txt` |
| `rm -i file` | Интерактивное удаление | `rm -i important.txt` |
| `rm -v file` | Вербальное удаление | `rm -v largefile.txt` |
| `rm -f file` | Принудительное удаление | `rm -f readonly.txt` |
| `rm -r directory` | Рекурсивное удаление каталога | `rm -r tempdir` |
| `rm -rf directory` | Принудительное рекурсивное удаление | `rm -rf /tmp/oldfiles` |

**Примеры удаления:**
```bash
# Удалить один файл
rm temp.txt

# Удалить несколько файлов
rm file1.txt file2.txt file3.txt

# Удалить каталог с содержимым
rm -r temp_directory

# Интерактивное удаление (с подтверждением)
rm -i important_file.txt

# Принудительное удаление (без подтверждения)
rm -f readonly_file.txt
```

**Удаление каталогов:**

**Команда rmdir:**
```bash
rmdir directory_name
```
Удаляет только пустые каталоги.

**Примеры:**
```bash
# Удалить пустой каталог
rmdir empty_folder

# Удалить несколько пустых каталогов
rmdir folder1 folder2 folder3
```

**Типичные ошибки:**
- ❌ Случайное удаление важных файлов
- ❌ Использование `rm -rf /` (удаление всей системы)
- ❌ Перепутать source и destination в mv
- ❌ Удаление непустого каталога с rmdir

**✅ Правильный подход:**
- Всегда используйте `-i` для важных файлов
- Дважды проверяйте пути перед удалением
- Используйте Tab для автодополнения
- Создавайте резервные копии перед удалением

**Советы по безопасности:**
- Никогда не используйте `rm -rf /` или `rm -rf *` без крайней необходимости
- Используйте `ls` перед удалением для проверки содержимого
- Рассмотрите использование `trash-cli` вместо `rm` для безопасности
- Будьте особенно осторожны с root-правами

**Полезные комбинации:**
```bash
# Переместить файлы по шаблону
mv *.txt /archive/

# Удалить файлы по шаблону
rm *.tmp

# Переименовать файл с добавлением даты
mv report.txt report_$(date +%Y%m%d).txt
```

Эти операции требуют внимательности и осторожности, особенно при работе с важными файлами.

## Жесткие и символические ссылки

Ссылки — это специальные файлы, которые указывают на другие файлы в системе. В Linux существует два типа ссылок: жесткие (hard links) и символические (symbolic links).

**Жесткие ссылки:**

Жесткая ссылка — это дополнительное имя для существующего файла. Физически это один и тот же файл с несколькими именами.

**Особенности жестких ссылок:**
- Ссылаются на тот же inode (идентификатор файла)
- Нельзя создать на каталоги
- Нельзя создать на файлы в другой файловой системе
- Если удалить оригинальный файл, жесткая ссылка продолжает работать
- Все ссылки равноправны (нет "оригинала" и "копии")

**Создание жесткой ссылки:**
```bash
ln target_file link_name
```

**Пример:**
```bash
# Создать файл
echo "Hello, World!" > original.txt

# Создать жесткую ссылку
ln original.txt hardlink.txt

# Проверить
ls -li original.txt hardlink.txt
```

**Символические ссылки:**

Символическая ссылка (символик-линк) — это специальный файл, который содержит путь к другому файлу.

**Особенности символических ссылок:**
- Ссылаются на путь к файлу, а не на inode
- Можно создавать на каталоги
- Можно создавать на файлы в другой файловой системе
- Если удалить оригинальный файл, символическая ссылка становится "битой"
- Меньше по размеру (хранят только путь)

**Создание символической ссылки:**
```bash
ln -s target_file link_name
```

**Пример:**
```bash
# Создать файл
echo "Hello, World!" > original.txt

# Создать символическую ссылку
ln -s original.txt symlink.txt

# Проверить
ls -li original.txt symlink.txt
```

**Таблица: Сравнение жестких и символических ссылок**
| Характеристика | Жесткая ссылка | Символическая ссылка |
|---------------|----------------|---------------------|
| Команда создания | `ln target link` | `ln -s target link` |
| Размер | Как у оригинала | Только путь |
| Работает при удалении оригинала | Да | Нет |
| Можно на каталоги | Нет | Да |
| Можно на другую ФС | Нет | Да |
| Проверка | `ls -i` (одинаковый inode) | `ls -l` (стрелка ->) |
| Безопасность | Выше | Ниже |

**Проверка ссылок:**
```bash
# Проверить жесткие ссылки (inode)
ls -i file1 file2

# Проверить символические ссылки
ls -l symlink

# Проверить, существует ли файл, на который ссылается символическая ссылка
ls -L symlink  # Покажет ошибку, если файл не существует
```

**Удаление ссылок:**
```bash
# Удалить ссылку (не оригинал)
rm link_name

# Для символических ссылок можно использовать unlink
unlink symlink_name
```

**Практическое применение:**
- **Жесткие ссылки**: Для резервного копирования, когда нужно гарантировать доступ к файлу
- **Символические ссылки**: Для создания ярлыков, организации файловой системы, совместимости

**Типичные ошибки:**
- ❌ Создание символической ссылки на несуществующий файл
- ❌ Циклические ссылки
- ❌ Путаница между жесткими и символическими ссылками

**✅ Правильный подход:**
- Используйте `ls -l` для проверки символических ссылок
- Используйте `ls -i` для проверки жестких ссылок
- Будьте осторожны с относительными путями в символических ссылках

Ссылки — мощный инструмент для организации файловой системы и управления файлами.

## Работа с файлами и каталогами

Работа с файлами и каталогами включает в себя множество операций, от простого просмотра содержимого до сложного поиска и фильтрации.

**Просмотр содержимого файлов:**

**Команда cat:**
```bash
cat filename
```
Показывает содержимое файла целиком.

**Примеры:**
```bash
cat /etc/passwd
cat document.txt
```

**Команда head:**
```bash
head filename
```
Показывает первые 10 строк файла.

**Примеры:**
```bash
head /var/log/syslog
head -20 document.txt  # Показать первые 20 строк
```

**Команда tail:**
```bash
tail filename
```
Показывает последние 10 строк файла.

**Примеры:**
```bash
tail /var/log/syslog
tail -f /var/log/syslog  # Следить за изменениями в реальном времени
tail -20 document.txt    # Показать последние 20 строк
```

**Команда less:**
```bash
less filename
```
Позволяет просматривать файл постранично.

**Горячие клавиши в less:**
- Пробел: Следующая страница
- b: Предыдущая страница
- /text: Поиск текста
- n: Следующее совпадение
- q: Выход

**Поиск файлов:**

**Команда find:**
```bash
find path -name pattern
```

**Примеры:**
```bash
# Найти все файлы с расширением .txt
find /home -name "*.txt"

# Найти файл по имени
find / -name "filename.txt"

# Найти файлы, измененные сегодня
find /var/log -mtime 0

# Найти файлы определенного размера
find /home -size +100M
```

**Таблица: Опции find**
| Опция | Описание | Пример |
|-------|----------|---------|
| `-name` | Поиск по имени | `find . -name "*.txt"` |
| `-type` | Поиск по типу | `find . -type f` (файлы), `-type d` (каталоги) |
| `-size` | Поиск по размеру | `find . -size +100M` |
| `-mtime` | Поиск по времени изменения | `find . -mtime -7` (за 7 дней) |
| `-user` | Поиск по владельцу | `find . -user username` |
| `-perm` | Поиск по правам | `find . -perm 755` |

**Поиск текста в файлах:**

**Команда grep:**
```bash
grep "pattern" filename
```

**Примеры:**
```bash
# Найти текст в файле
grep "error" /var/log/syslog

# Найти текст во всех файлах каталога
grep "keyword" /home/user/*.txt

# Рекурсивный поиск
grep -r "pattern" /path/to/search

# Игнорировать регистр
grep -i "pattern" filename

# Показать номера строк
grep -n "pattern" filename
```

**Таблица: Опции grep**
| Опция | Описание | Пример |
|-------|----------|---------|
| `-i` | Игнорировать регистр | `grep -i "error" file.log` |
| `-n` | Показать номера строк | `grep -n "pattern" file.txt` |
| `-r` | Рекурсивный поиск | `grep -r "pattern" /path` |
| `-v` | Инвертировать поиск | `grep -v "pattern" file.txt` |
| `-c` | Подсчитать совпадения | `grep -c "pattern" file.txt` |
| `-A n` | Показать n строк после | `grep -A 3 "pattern" file.txt` |
| `-B n` | Показать n строк до | `grep -B 3 "pattern" file.txt` |

**Управление правами доступа:**

**Команда chmod:**
```bash
chmod permissions file
```

**Примеры:**
```bash
# Дать всем права на чтение и выполнение
chmod 755 script.sh

# Дать владельцу все права, остальным - только чтение
chmod 744 document.txt

# Символьная запись
chmod u+rwx,g+rx,o+r file.txt
```

**Команда chown:**
```bash
chown user:group file
```

**Примеры:**
```bash
# Изменить владельца
chown user1 file.txt

# Изменить владельца и группу
chown user1:group1 file.txt

# Рекурсивно для каталога
chown -R user1:group1 directory/
```

**Таблица: Права доступа**
| Право | Числовое значение | Символьное обозначение |
|------|------------------|----------------------|
| Чтение | 4 | r |
| Запись | 2 | w |
| Выполнение | 1 | x |
| Нет прав | 0 | - |

**Примеры комбинаций:**
- 7 (rwx): Чтение, запись, выполнение
- 6 (rw-): Чтение, запись
- 5 (r-x): Чтение, выполнение
- 4 (r--): Только чтение

Эти команды являются основой для эффективной работы с файлами и каталогами в Linux.

## Чтение текстовых файлов

Чтение текстовых файлов — важная операция для системного администратора, особенно при анализе логов, конфигурационных файлов и документации.

**Команда cat:**
```bash
cat filename
```
Показывает содержимое файла целиком.

**Примеры:**
```bash
cat /etc/passwd
cat /etc/fstab
cat document.txt
```

**Опции cat:**
```bash
cat -n filename    # Показать с номерами строк
cat -b filename    # Показать с номерами непустых строк
cat -s filename    # Сжать пустые строки
```

**Команда head:**
```bash
head filename
```
Показывает первые 10 строк файла (по умолчанию).

**Примеры:**
```bash
head /var/log/syslog
head -20 document.txt     # Показать первые 20 строк
head -n 50 config.conf    # Показать первые 50 строк
```

**Команда tail:**
```bash
tail filename
```
Показывает последние 10 строк файла (по умолчанию).

**Примеры:**
```bash
tail /var/log/syslog
tail -20 document.txt     # Показать последние 20 строк
tail -n 50 config.conf    # Показать последние 50 строк
```

**Режим "хвоста" (tail -f):**
```bash
tail -f filename
```
Позволяет наблюдать за изменениями файла в реальном времени. Очень полезно для мониторинга логов.

**Примеры:**
```bash
tail -f /var/log/syslog
tail -f /var/log/apache2/access.log
```

**Команда less:**
```bash
less filename
```
Позволяет просматривать файл постранично, с возможностью поиска и навигации.

**Горячие клавиши в less:**
- Пробел: Следующая страница
- b: Предыдущая страница
- /text: Поиск текста вперед
- ?text: Поиск текста назад
- n: Следующее совпадение
- N: Предыдущее совпадение
- g: В начало файла
- G: В конец файла
- q: Выход

**Примеры:**
```bash
less /var/log/syslog
less -N document.txt    # С номерами строк
```

**Команда more:**
```bash
more filename
```
Аналог less, но с ограниченными возможностями.

**Таблица: Сравнение команд для чтения файлов**
| Команда | Преимущества | Недостатки | Когда использовать |
|---------|-------------|------------|-------------------|
| `cat` | Простота, можно объединять файлы | Показывает весь файл сразу | Маленькие файлы, вывод в pipeline |
| `head` | Быстро показывает начало | Только начало файла | Просмотр заголовков, первых строк |
| `tail` | Быстро показывает конец, режим -f | Только конец файла | Просмотр конца, мониторинг логов |
| `less` | Полная навигация, поиск | Требует навыков | Большие файлы, детальный анализ |
| `more` | Простая постраничная навигация | Ограниченные возможности | Простой просмотр |

**Практические примеры:**
```bash
# Просмотреть первые 100 строк лога
head -100 /var/log/syslog

# Просмотреть последние 50 строк лога
tail -50 /var/log/syslog

# Наблюдать за новыми записями в логе
tail -f /var/log/apache2/error.log

# Поиск определенной ошибки в логе
grep "ERROR" /var/log/syslog | tail -20

# Просмотреть файл с номерами строк
less -N /etc/passwd

# Просмотреть только определенные строки
sed -n '10,20p' filename    # Строки 10-20
```

**Советы:**
- Для больших файлов используйте `less` или `tail/head`
- Для мониторинга используйте `tail -f`
- Для анализа логов комбинируйте с `grep`
- Используйте `cat -n` для просмотра с номерами строк

Эти команды помогут эффективно работать с текстовыми файлами любой величины.

## Текстовые редакторы

Текстовые редакторы — важный инструмент для системного администратора. В ОС «Альт» доступны несколько редакторов с разным уровнем сложности и функциональностью.

**Nano — простой текстовый редактор**

Nano — самый простой и дружелюбный редактор для новичков.

**Запуск:**
```bash
nano filename
```

**Горячие клавиши nano:**
- Ctrl+O: Сохранить файл
- Ctrl+X: Выйти из редактора
- Ctrl+G: Справка
- Ctrl+W: Поиск текста
- Ctrl+\: Замена текста
- Ctrl+K: Вырезать строку
- Ctrl+U: Вставить строку
- Alt+6: Копировать строку
- Ctrl+C: Показать позицию курсора

**Преимущества nano:**
- Простота использования
- Подсказки в нижней части экрана
- Подсветка синтаксиса
- Подходит для новичков

**Недостатки:**
- Ограниченная функциональность
- Медленная работа с большими файлами

**Vim — мощный текстовый редактор**

Vim — модальный редактор с огромным количеством возможностей.

**Режимы vim:**
- **Обычный режим (Normal)**: Навигация и команды
- **Режим вставки (Insert)**: Ввод текста
- **Командный режим (Command)**: Выполнение команд

**Запуск:**
```bash
vim filename
```

**Основные команды vim:**

**Переход в режим вставки:**
- i: Вставка перед курсором
- a: Вставка после курсора
- o: Новая строка ниже
- O: Новая строка выше

**Навигация (в обычном режиме):**
- h, j, k, l: Движение курсора
- w: Перейти к началу следующего слова
- b: Перейти к началу предыдущего слова
- 0: В начало строки
- $: В конец строки
- G: В конец файла
- gg: В начало файла
- :n: Перейти на строку n

**Редактирование:**
- x: Удалить символ под курсором
- dd: Удалить строку
- yy: Скопировать строку
- p: Вставить после курсора
- u: Отменить действие
- Ctrl+R: Повторить отмененное действие

**Командный режим (нажать :):**
- :w: Сохранить файл
- :q: Выйти
- :wq: Сохранить и выйти
- :q!: Выйти без сохранения
- :set number: Показать номера строк
- :/text: Поиск текста

**Emacs — расширяемый текстовый редактор**

Emacs — мощный редактор с возможностью расширения.

**Запуск:**
```bash
emacs filename
```

**Горячие клавиши emacs:**
- Ctrl+X, Ctrl+S: Сохранить файл
- Ctrl+X, Ctrl+C: Выйти из emacs
- Ctrl+X, Ctrl+F: Открыть файл
- Ctrl+S: Поиск вперед
- Ctrl+R: Поиск назад
- Ctrl+K: Удалить строку
- Ctrl+Y: Вставить
- Ctrl+G: Отменить команду

**Таблица: Сравнение текстовых редакторов**
| Редактор | Сложность | Функциональность | Размер файлов | Когда использовать |
|----------|-----------|------------------|---------------|-------------------|
| nano | Низкая | Низкая | Малые | Новички, простые задачи |
| vim | Высокая | Очень высокая | Любые | Опытные пользователи, сложные задачи |
| emacs | Средняя | Высокая | Любые | Программисты, расширенные задачи |

**Рекомендации по выбору:**
- **Для новичков**: Начинайте с nano
- **Для системных администраторов**: Освойте vim
- **Для программистов**: Рассмотрите emacs или vim

**Практические советы:**
- Всегда делайте резервную копию перед редактированием важных файлов
- Используйте подсветку синтаксиса для конфигурационных файлов
- Освойте хотя бы один редактор на базовом уровне
- Практикуйтесь регулярно для улучшения навыков

Выбор редактора зависит от ваших потребностей и опыта. Главное — уметь эффективно работать с текстовыми файлами.

## Стандартные потоки, pipeline

Стандартные потоки — это механизм взаимодействия программ с внешним миром в Unix-подобных системах, включая ОС «Альт». Понимание потоков и pipeline необходимо для эффективной работы в командной строке.

**Стандартные потоки**

Каждая программа в Linux имеет три стандартных потока:

- **stdin (стандартный ввод, дескриптор 0)**: Источник данных для программы. По умолчанию — клавиатура.
- **stdout (стандартный вывод, дескриптор 1)**: Выходной поток для нормальных данных. По умолчанию — экран терминала.
- **stderr (стандартный вывод ошибок, дескриптор 2)**: Выходной поток для сообщений об ошибках. По умолчанию — экран, но может быть перенаправлен отдельно от stdout.

**Перенаправление потоков**

Потоки можно перенаправлять для изменения источника или назначения данных.

**Перенаправление stdout:**
```bash
command > file        # Перенаправить stdout в файл (перезаписать)
command >> file       # Дописать stdout в файл
command 2> file       # Перенаправить stderr в файл
command &> file       # Перенаправить stdout и stderr в файл
command 2>&1          # Перенаправить stderr в stdout
```

**Примеры:**
```bash
# Сохранить вывод команды в файл
ls > filelist.txt

# Дописать вывод в файл
echo "Новая запись" >> logfile.txt

# Сохранить ошибки в отдельный файл
find / -name "*.txt" 2> errors.log

# Сохранить и вывод, и ошибки в один файл
find / -name "*.txt" > output.log 2>&1

# Или проще
find / -name "*.txt" &> output.log
```

**Перенаправление stdin:**
```bash
command < file        # Использовать файл как stdin
```

**Примеры:**
```bash
# Сортировать содержимое файла
sort < unsorted.txt > sorted.txt

# Передать содержимое файла на вход команде
wc -l < document.txt
```

**Pipeline (конвейер)**

Pipeline — это механизм соединения команд, где вывод одной команды становится вводом другой. Обозначается символом `|`.

**Синтаксис:**
```bash
command1 | command2 | command3
```

**Преимущества pipeline:**
- Эффективность: Данные передаются напрямую, без промежуточных файлов
- Комбинирование: Позволяет строить сложные команды из простых
- Гибкость: Можно комбинировать любые команды

**Примеры pipeline:**
```bash
# Найти все файлы .txt и посчитать их количество
find /home -name "*.txt" | wc -l

# Просмотреть список процессов и найти определенные
ps aux | grep apache

# Отсортировать файлы по размеру и показать первые 10
ls -la | sort -k5 -n | tail -10

# Найти ошибки в логе и показать последние 20
grep "ERROR" /var/log/syslog | tail -20
```

**Таблица: Операторы перенаправления и pipeline**
| Оператор | Описание | Пример |
|----------|----------|---------|
| `>` | Перенаправить stdout (перезаписать) | `ls > files.txt` |
| `>>` | Перенаправить stdout (дописать) | `echo "text" >> file.txt` |
| `<` | Перенаправить stdin | `sort < input.txt` |
| `2>` | Перенаправить stderr | `command 2> errors.log` |
| `&>` | Перенаправить stdout и stderr | `command &> output.log` |
| `|` | Pipeline | `command1 \| command2` |
| `tee` | Разветвить поток | `command \| tee file.txt` |

**Дополнительные инструменты:**

**tee — разветвление потока:**
```bash
command | tee file
```
Выводит данные как на экран, так и в файл.

**Пример:**
```bash
# Показать вывод на экран и сохранить в файл
ls -la | tee filelist.txt

# Дописать в файл
ls -la | tee -a filelist.txt
```

**xargs — преобразование вывода в аргументы:**
```bash
command | xargs another_command
```

**Пример:**
```bash
# Найти файлы и удалить их
find /tmp -name "*.tmp" | xargs rm

# Найти файлы и изменить права
find /home -name "*.sh" | xargs chmod +x
```

**Практические примеры использования:**
```bash
# Поиск и анализ логов
grep "ERROR" /var/log/syslog | sort | uniq -c | sort -nr

# Работа с процессами
ps aux | grep apache | awk '{print $2}' | xargs kill

# Анализ дискового пространства
du -sh /home/* | sort -hr | head -10

# Поиск и обработка файлов
find /home -name "*.txt" -exec grep -l "pattern" {} \;
```

**Советы:**
- Используйте pipeline для сложных операций
- Комбинируйте перенаправление и pipeline
- Используйте `tee` для сохранения промежуточных результатов
- Практикуйтесь с простыми pipeline перед переходом к сложным

Понимание стандартных потоков и умение использовать pipeline — ключ к эффективной работе в командной строке Linux.

## Заключение

В этой лекции мы изучили основы работы с интерфейсом командной строки в ОС «Альт». Командная строка — это мощный инструмент, который предоставляет прямой доступ к системе и позволяет эффективно управлять ресурсами.

**Ключевые моменты:**
- Текстовый интерфейс более эффективен для автоматизации и удаленной работы
- Bash — основная оболочка с множеством возможностей
- Стандарт FHS обеспечивает предсказуемость структуры файловой системы
- Умение работать с файлами и каталогами — основа администрирования
- Pipeline и перенаправление потоков — ключ к эффективной работе

**Лучшие практики:**
- Всегда используйте Tab для автодополнения
- Проверяйте команды перед выполнением
- Используйте `ls` для проверки содержимого
- Будьте осторожны с командами удаления
- Практикуйтесь регулярно для улучшения навыков

**Связь с лабораторными работами:**
- Лабораторное занятие №2: Работа в командной строке
- Лабораторное занятие №4: Учетные записи и права доступа

**Чек-лист для самопроверки:**
- [ ] Понимаю различия между CLI и GUI
- [ ] Могу использовать основные команды Bash
- [ ] Знаю структуру каталогов по FHS
- [ ] Умею навигировать по каталогам
- [ ] Могу создавать, копировать, перемещать и удалять файлы
- [ ] Понимаю разницу между жесткими и символическими ссылками
- [ ] Умею работать с текстовыми редакторами
- [ ] Понимаю принципы работы со стандартными потоками
- [ ] Могу использовать pipeline для объединения команд

Командная строка требует практики, но с опытом становится мощным и удобным инструментом. Регулярная практика поможет освоить эти навыки и эффективно использовать их в дальнейшем администрировании.

## Вопросы для самоконтроля

1. В чем преимущества текстового интерфейса перед графическим?
2. Какие основные функции предоставляет оболочка Bash?
3. Что такое стандарт FHS и зачем он нужен?
4. Какие существуют типы путей в файловой системе?
5. Как создать и скопировать файл в Linux?
6. В чем разница между жесткими и символическими ссылками?
7. Какие текстовые редакторы доступны в ОС «Альт»?
8. Что такое стандартные потоки и как их перенаправлять?
9. Как работает pipeline и для чего он используется?
10. Какие горячие клавиши используются в Bash?

## Практические задания

**Задание 1: Основы командной строки**
1. Создайте каталог test в домашнем каталоге
2. Перейдите в созданный каталог
3. Создайте файл readme.txt с текстом "Hello, ALT Linux!"
4. Просмотрите содержимое файла разными способами
5. Скопируйте файл в backup.txt
6. Переименуйте backup.txt в copy.txt
7. Удалите исходный файл readme.txt

**Задание 2: Работа с правами доступа**
1. Создайте файл script.sh с содержимым "#!/bin/bash\necho 'Hello'"
2. Сделайте файл исполняемым
3. Проверьте права доступа
4. Измените владельца файла на root (если есть права)
5. Создайте символическую ссылку на файл

**Задание 3: Поиск и фильтрация**
1. Найдите все файлы с расширением .conf в системе
2. Найдите файлы, измененные за последний день
3. Найдите текст "error" в логах системы
4. Используя pipeline, найдите 10 самых больших файлов в системе

**Задание 4: Работа с потоками**
1. Перенаправьте вывод команды ls в файл
2. Используя pipeline, найдите все процессы с именем "bash"
3. Сохраните вывод команды ps aux в файл, отсортировав по использованию памяти
4. Используя tee, покажите вывод на экран и сохраните в файл одновременно

## Глоссарий терминов

- **CLI (Command Line Interface)**: Интерфейс командной строки
- **GUI (Graphical User Interface)**: Графический интерфейс пользователя
- **Bash**: Bourne Again Shell, стандартная командная оболочка в Linux
- **FHS (Filesystem Hierarchy Standard)**: Стандарт иерархии файловой системы
- **Путь**: Адрес файла или каталога в файловой системе
- **Абсолютный путь**: Полный путь от корня файловой системы
- **Относительный путь**: Путь относительно текущего каталога
- **Ссылка**: Файл, указывающий на другой файл
- **Жесткая ссылка**: Ссылка, указывающая на тот же inode
- **Символическая ссылка**: Ссылка, содержащая путь к файлу
- **stdin**: Стандартный поток ввода
- **stdout**: Стандартный поток вывода
- **stderr**: Стандартный поток ошибок
- **Pipeline**: Механизм соединения команд через символ |
- **Перенаправление**: Изменение источника или назначения потока
- **Vim**: Модальный текстовый редактор
- **Nano**: Простой текстовый редактор
- **Emacs**: Расширяемый текстовый редактор

## Литература

- Официальная документация ОС «Альт»: https://docs.altlinux.org/
- Руководство по Bash: https://www.gnu.org/software/bash/manual/
- Книга "Linux Command Line and Shell Scripting Bible" (Richard Blum)
- Книга "The Linux Command Line" (William Shotts)
- Форум ОС «Альт»: https://forum.altlinux.org/